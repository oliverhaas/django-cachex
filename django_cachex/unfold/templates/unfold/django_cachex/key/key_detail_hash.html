{% load i18n %}
<!-- Hash Operations -->
<div class="bg-white dark:bg-base-900 lg:border lg:border-base-200 lg:dark:border-base-800 lg:rounded-default lg:shadow-xs mb-6">
    <div class="px-4 py-3 border-b border-base-200 dark:border-base-800">
        <h2 class="text-lg font-semibold text-font-important-light dark:text-font-important-dark">{% trans 'Operations' %}</h2>
    </div>
    <div class="p-4 space-y-3">
        <div class="flex items-center gap-3">
            <label class="w-24 text-sm font-medium text-base-700 dark:text-base-300 flex-none">{% trans 'Set Field:' %}</label>
            <form method="post" class="flex items-center gap-2">
                {% csrf_token %}
                <input type="hidden" name="action" value="hset">
                <input type="text" name="field_name" placeholder="{% trans 'field' %}"
                       class="w-28 px-2 py-1 text-sm border border-base-300 dark:border-base-600 rounded
                              bg-white dark:bg-base-700 text-base-900 dark:text-base-100">
                <input type="text" name="field_value" placeholder="{% trans 'value' %}"
                       class="w-40 px-2 py-1 text-sm border border-base-300 dark:border-base-600 rounded
                              bg-white dark:bg-base-700 text-base-900 dark:text-base-100">
                <button type="submit" class="px-3 py-1 text-sm font-medium rounded bg-primary-600 text-white hover:bg-primary-700">
                    {% trans 'Set' %}
                </button>
            </form>
        </div>
    </div>
</div>
<!-- Hash Fields -->
<div class="bg-white dark:bg-base-900 lg:border lg:border-base-200 lg:dark:border-base-800 lg:rounded-default lg:shadow-xs mb-6">
    <div class="px-4 py-3 border-b border-base-200 dark:border-base-800">
        <h2 class="text-lg font-semibold text-font-important-light dark:text-font-important-dark">
            {% trans 'Hash Fields' %}{% if type_data.length %} ({{ type_data.length }}){% endif %}
        </h2>
    </div>
    {% if type_data.fields %}
    <table class="w-full">
        <thead class="bg-base-50 dark:bg-base-800 border-b border-base-200 dark:border-base-800">
            <tr>
                <th class="px-4 py-3 text-left text-xs font-medium text-base-500 dark:text-base-400 uppercase">{% trans 'Field' %}</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-base-500 dark:text-base-400 uppercase">{% trans 'Value' %}</th>
                <th class="w-32 px-4 py-3 text-left text-xs font-medium text-base-500 dark:text-base-400 uppercase">{% trans 'Actions' %}</th>
            </tr>
        </thead>
        <tbody class="divide-y divide-base-200 dark:divide-base-800">
            {% for field, value in type_data.fields.items %}
            <tr class="hover:bg-base-50 dark:hover:bg-base-800">
                <td class="px-4 py-3 font-mono text-sm text-base-900 dark:text-base-100">{{ field }}</td>
                <form method="post" class="contents">
                    {% csrf_token %}
                    <input type="hidden" name="action" value="hset">
                    <input type="hidden" name="field_name" value="{{ field }}">
                    <td class="px-4 py-3">
                        <input type="text" name="field_value" value="{{ value }}"
                               class="w-full px-2 py-1 text-sm font-mono border border-base-300 dark:border-base-600 rounded
                                      bg-white dark:bg-base-800 text-base-900 dark:text-base-100">
                    </td>
                    <td class="px-4 py-3 whitespace-nowrap">
                        <button type="submit" class="px-2 py-1 text-xs font-medium rounded bg-primary-600 text-white hover:bg-primary-700">
                            {% trans 'Update' %}
                        </button>
                </form>
                        <form method="post" class="inline ml-1">
                            {% csrf_token %}
                            <input type="hidden" name="action" value="hdel">
                            <input type="hidden" name="field" value="{{ field }}">
                            <button type="submit" class="px-2 py-1 text-xs font-medium rounded bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/50">
                                {% trans 'Delete' %}
                            </button>
                        </form>
                    </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p class="p-4 text-base-500 dark:text-base-400">{% trans 'Hash is empty.' %}</p>
    {% endif %}
</div>
