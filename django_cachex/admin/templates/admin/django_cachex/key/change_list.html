{% extends "admin/change_list.html" %}
{% load i18n %}

{% block breadcrumbs %}
<div class="breadcrumbs">
    <a href="{% url 'admin:index' %}">{% trans 'Home' %}</a>
    &rsaquo; <a href="{% url 'admin:django_cachex_cache_changelist' %}">{% trans 'Caches' %}</a>
    &rsaquo; <a href="{% url 'admin:django_cachex_cache_change' cache_name %}">{{ cache_name }}</a>
    &rsaquo; {% trans 'Keys' %}
</div>
{% endblock %}

{% block object-tools %}
<ul class="object-tools">
    {% block object-tools-items %}
    <li>
        <a href="?cache={{ cache_name }}{% if not help_active %}&amp;help=1{% endif %}">{% trans 'Help' %}</a>
    </li>
    <li>
        <a href="{% url 'admin:django_cachex_cache_change' cache_name %}">{% trans 'Cache Details' %}</a>
    </li>
    <li>
        <form method="post" style="display: inline;" id="clear-cache-form">
            {% csrf_token %}
            <input type="hidden" name="action" value="clear_cache">
            <input type="hidden" name="cache_name" value="{{ cache_name }}">
            <a href="#" onclick="if(confirm('Clear all keys in \'{{ cache_name|escapejs }}\'? This removes keys for the current cache version.')) document.getElementById('clear-cache-form').submit(); return false;" class="deletelink">{% trans 'Clear' %}</a>
        </form>
    </li>
    <li>
        <a href="{% url 'admin:django_cachex_key_add' %}?cache={{ cache_name }}" class="addlink">{% trans 'Add key' %}</a>
    </li>
    {% endblock %}
</ul>
{% endblock %}

{% block pagination %}
<nav class="paginator">
    <ul>
        {% if cl.result_list.cursor > 0 %}
        <li><a role="button" href="?cache={{ cache_name }}{% for k, v in cl.params.items %}{% if k != 'cursor' %}&amp;{{ k }}={{ v|urlencode }}{% endif %}{% endfor %}&amp;count={{ cl.result_list.scan_count }}">{% trans 'Start' %}</a></li>
        {% endif %}
        {% if cl.result_list.has_next %}
        <li><a role="button" href="?cache={{ cache_name }}{% for k, v in cl.params.items %}{% if k != 'cursor' %}&amp;{{ k }}={{ v|urlencode }}{% endif %}{% endfor %}&amp;count={{ cl.result_list.scan_count }}&amp;cursor={{ cl.result_list.next_cursor }}">{% trans 'Next' %}</a></li>
        {% endif %}
    </ul>
    {{ cl.result_list|length }} {% trans 'keys shown' %}
</nav>
{% endblock %}
